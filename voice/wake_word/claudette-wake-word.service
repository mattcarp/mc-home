# systemd service unit for Claudette wake word listener
# Install: sudo cp claudette-wake-word.service /etc/systemd/system/
# Enable: sudo systemctl enable claudette-wake-word && sudo systemctl start claudette-wake-word

[Unit]
Description=Claudette Home — Wake Word Listener
Documentation=https://github.com/mattcarp/mc-home
After=network.target sound.target
Wants=sound.target

[Service]
Type=simple
User=sysop
WorkingDirectory=/home/sysop/projects/mc-home/voice/wake_word
EnvironmentFile=/etc/environment

# Use the bridge (swappable backend)
ExecStart=/usr/bin/python3 wake_word_bridge.py \
    --backend porcupine \
    --model models/claudette_linux.ppn \
    --threshold 0.5

# Restart on failure (mic disconnect, etc.)
Restart=on-failure
RestartSec=5s

# Log wake word detections (JSON lines) to journal
StandardOutput=journal
StandardError=journal
SyslogIdentifier=claudette-wake-word

# Resource limits — this should be very lightweight
CPUQuota=10%
MemoryMax=128M

[Install]
WantedBy=multi-user.target
